
<div class="container login">
  <div class="registrarse">
    <h2>Registrarse</h2>

    <div *ngIf="pasoActual === 1">
      <!-- Paso 1 -->
      <div class="separator">
        <div class="circle-lleno"><p>1</p></div>
        <div class="line"></div>
        <div class="circle"><p>2</p></div>
        <div class="line"></div>
        <div class="circle"><p>3</p></div>
      </div>

      <form [formGroup]="datosForm" >

      <div class="inputs">
        <div class="input450">
          <label for="email">Correo:</label>
          <input type="email" id="email" name="email" placeholder="Ingrese su correo" formControlName="correo">
        </div>
        <div class="input450">
          <label for="contraseña">Contraseña:</label>
          <input type="password" id="contraseña" name="contraseña" placeholder="Ingrese una contraseña" formControlName="contrasena">
        </div>
        <div class="input450">
          <label for="comfirmarContraseña">Confirmar Contraseña:</label>
          <input type="password" id="comfirmarContraseña" name="comfirmarContraseña" placeholder="Confirma su contraseña" formControlName="confirmarContraseña">
        </div>
      </div>

      <p>¿Ya tienes cuenta? <a routerLink="/inicioSesion">Haz click aquí</a></p>

      <div class="buttons">
          <button routerLink="" class="cancel-button" (click)="cancelar()">Cancelar</button>
        <button class="login-button" (click)="siguientePaso()">Siguiente Paso</button>
      </div>
      </form>
    </div>


    <div *ngIf="pasoActual === 2">
      <!-- Paso 2 -->
      <div class="separator">
        <div class="circle-lleno"><p>1</p></div>
        <div class="line"></div>
        <div class="circle-lleno"><p>2</p></div>
        <div class="line"></div>
        <div class="circle"><p>3</p></div>
      </div>
      <form [formGroup]="datosForm">
        <div class="multi-col">
          <div class="input450">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" placeholder="Ingrese su Nombre" formControlName="nombre">

            <label for="dni">Documento de Identidad:</label>
            <input type="number" id="dni" name="dni" placeholder="Ingrese su DNI" formControlName="dni">

            <label for="provincia">Provincia:</label>
            <!-- Ejemplo de la plantilla para la lista de provincias -->
            <select id="provincia" name="provincia" [(ngModel)]="selectedProvincia" (change)="filtrarDepartamentos()" formControlName="provincia">
              <option *ngFor="let provincia of provincias" [value]="provincia.codigo">{{ provincia.nombre }}</option>
            </select>
          </div>

          <div class="input450">
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" name="apellido" placeholder="Ingrese su Apellido" formControlName="apellido">

            <label for="telefono">Telefono:</label>
            <input type="number" id="telefono" name="telefono" placeholder="Ingrese su numero de telefono" formControlName="telefono">

            <label for="departamento">Departamento:</label>
            <!-- Ejemplo de la plantilla para la lista de departamentos -->
            <select id="departamento" name="departamento" [(ngModel)]="selectedDepartamento" formControlName="departamento">
              <option *ngFor="let departamento of departamentos" [value]="departamento.codigo">{{ departamento.nombre }}</option>
            </select>
          </div>
        </div>

        <div class="buttons">
          <button class="cancel-button" (click)="anteriorPaso()">Paso Anterior</button>
          <button class="login-button" (click)="siguientePaso()">Siguiente Paso</button>
        </div>
      </form>

    </div>

    <div *ngIf="pasoActual === 3">
      <!-- Paso 3 -->
      <div class="separator">
        <div class="circle-lleno"><p>1</p></div>
        <div class="line"></div>
        <div class="circle-lleno"><p>2</p></div>
        <div class="line"></div>
        <div class="circle-lleno"><p>3</p></div>
      </div>
      <form [formGroup]="datosForm">
        <div class="multi-col">
          <div class="input450">
            <label for="imagen">Foto de Perfil:</label>
            <input type="file"  (change)="onFileChange($event)" accept="image/*" id="imagen" name="imagen" formControlName="imgPerfil">
            <div *ngIf="imageSrc">
              <img id="imagen-preview"  [src]="imageSrc" alt="Preview" />
            </div>
          </div>

          <div class="input450">
            <label for="descripcion">Descripción:</label>
            <textarea id="descripcion" name="descripcion" cols="30" rows="11" placeholder="Agrega una Descripcion" formControlName="descripcion"></textarea>
          </div>
        </div>
      </form>
      <div class="buttons">
        <button class="cancel-button" (click)="anteriorPaso()">Paso Anterior</button>
        <button class="login-button" (click)="registrarUsuario()" routerLink="/inicioSesion">Guardar</button>
      </div>
    </div>
  </div>
</div>
